
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Grunt: Configuring tasks in korean - zziuni's Blog</title>
	<meta name="author" content="zziuni">

	
	<meta name="description" content="Grunt은 Javascript Task Runner 입니다. 이 문서는 Grunt 공식 사이트의 Configuring Tasks를 번역한 문서이며 grunt-cli의 버전이 0.1.10일 때 번역했습니다. Configuring Tasks 이 문서는 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="zziuni's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/javascripts/jquery.toc.js"></script>
<script src="/javascripts/main.js"></script>
</head>


<body>
	<header id="header" class="inner"><div id="main-header">
	<h1><a href="/">zziuni's Blog</a></h1>
	<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
            <li class="menu-cate"><a href="#">Category</a>
                <ul><li><a href='/blog/categories/amd'>AMD (1)</a></li><li><a href='/blog/categories/chrome'>Chrome (1)</a></li><li><a href='/blog/categories/devtool'>DevTool (1)</a></li><li><a href='/blog/categories/grunt'>Grunt (3)</a></li><li><a href='/blog/categories/javascript'>Javascript (4)</a></li><li><a href='/blog/categories/requirejs'>RequireJS (1)</a></li><li><a href='/blog/categories/translate'>Translate (5)</a></li></ul>
            </li>
</ul></nav>
	<nav id="mobile-nav">
		<div class="alignleft menu">
			<a class="button">Menu</a>
			<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
            <li class="menu-cate"><a href="#">Category</a>
                <ul><li><a href='/blog/categories/amd'>AMD (1)</a></li><li><a href='/blog/categories/chrome'>Chrome (1)</a></li><li><a href='/blog/categories/devtool'>DevTool (1)</a></li><li><a href='/blog/categories/grunt'>Grunt (3)</a></li><li><a href='/blog/categories/javascript'>Javascript (4)</a></li><li><a href='/blog/categories/requirejs'>RequireJS (1)</a></li><li><a href='/blog/categories/translate'>Translate (5)</a></li></ul>
            </li>
</ul></div>
		</div>
		<div class="alignright search">
			<a class="button"></a>
			<div class="container">
				<form action="http://google.com/search" method="get">
					<input type="text" name="q" results="0">
					<input type="hidden" name="q" value="site:zziuni.github.io">
				</form>
			</div>
		</div>
	</nav>
	<nav id="sub-nav" class="alignright">
		<div class="social">
			
			<a class="facebook" href="http://www.facebook.com/zziuni" title="Facebook">Facebook</a>
			
			
			
			<a class="twitter" href="http://twitter.com/zziuni" title="Twitter">Twitter</a>
			
			
			<a class="github" href="https://github.com/zziuni" title="GitHub">GitHub</a>
			
	    
			
			
			
			
			
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
			
	    
		</div>
		<form class="search" action="http://google.com/search" method="get">
			<input class="alignright" type="text" name="q" results="0">
			<input type="hidden" name="q" value="site:zziuni.github.io">
		</form>
	</nav>
</div>
<div class="cate-list">
    <ul></ul>
</div>


</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Grunt: Configuring Tasks in Korean</h2>
	<div class="entry-content"><blockquote><p><a href="http://gruntjs.com">Grunt</a>은 Javascript Task Runner 입니다. 이 문서는 Grunt 공식 사이트의 <a href="http://gruntjs.com/configuring-tasks">Configuring Tasks</a>를 번역한 문서이며 grunt-cli의 버전이 0.1.10일 때 번역했습니다.</p></blockquote>

<h1>Configuring Tasks</h1>

<p>이 문서는 <code>Gruntfile</code>를 사용하는 프로젝트를 위해서 task 단위로 환경설정을 하는 법을 설명한다. <code>Gruntfile</code>에 대해 잘 모른다면 <a href="http://gruntjs.com/getting-started">Getting Started</a> (<a href="http://zziuni.github.io/blog/2013/10/13/grunt-getting-started-in-korean/">번역문</a>)문서를 먼저 읽어보고 <a href="http://gruntjs.com/sample-gruntfile">Gruntfile 샘플</a> 파일을 체크아웃 받자.</p>

<h2>Grunt Configuration</h2>

<p>task 환경설정은 <code>Gruntfile</code>에서 <code>grunt.initConfig</code> 메서드를 통해서 지정한다. 일반적으로 환경설정은 task 명과 동일한 프로퍼티의 값으로 설정한다. 여러분이 설정한 task의 이름들과 충돌하지만 않으면 얼마든지 임의의 데이터를 넣을 수 있다. 물론 무시되지만.</p>

<!-- more -->


<p>또한, 이 파일은 JSON이 아닌 자바스크립트 파일이기 때문에, 모든 자바스크립트 코드를 사용할 수 있다. 필요하다면 동적으로 환경설정을 생성할 수도 있다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// concat task를 위한 환경설정은 여기에 넣는다.</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">uglify</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// uglify task를 위한 환경설정은 여기에 넣는다. </span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="c1">// 특정 task와 관련없는 임의의 프로퍼티</span>
</span><span class='line'>  <span class="nx">my_property</span><span class="o">:</span> <span class="s1">&#39;whatever&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">my_src_files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;bar/*.js&#39;</span><span class="p">],</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Task Configuration and Targets</h2>

<p>task 하나가 실행되면, Grunt는 그 task의 이름으로 <code>Gruntfile</code>의 환경설정 객체에서 프로퍼티를 찾고 이를 해당 task의 환경설정으로 사용한다. 여러 일을 한 번에 하는 multi-task는 다시 별도의 target 명을 사용해서 환경설정을 개별적으로 가질 수 있다. 다음 예제를 보면 <code>uglify</code> task는 <code>bar</code> target만 가지고 있지만, <code>concat</code> task는 <code>foo</code>와 <code>bar</code>라는 두 개의 target을 갖고 있다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// concat task의 &quot;foo&quot; 타겟을 위한 옵션과 파일을 여기에 넣는다. </span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">bar</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// concat task의 &quot;bar&quot; 타겟을 위한 옵션과 파일을 여기에 넣는다. </span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">uglify</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">bar</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// uglify task의 &quot;bar&quot; 타겟을 위한 옵션과 파일을 여기에 넣는다. </span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>grunt concat</code>를 입력하면 모든 target을 순회하며, 차례대로 모든 target의 환경설정을 가져오는 반면에, <code>grunt concat:foo</code>나 <code>grunt concat:bar</code>처럼 task와 target을 모두 사용해서 지정하면 특정 target의 환경설정만 가져온다. 단, task 명이 <strong>grunt.renameTask</strong>로 변경되면, Grunt는 새로운 task 명으로 config 객체에서 프로퍼티 명을 찾는다.</p>

<h2>Options</h2>

<p>task 환경설정 하나를 살펴보자, <code>options</code> 프로퍼티는 내장된 기본값을 재정의 하기 위해서 덮어 쓸 때 사용한다. 그리고 각 target 별로도 해당 target에만 한정된 <code>options</code> 프로퍼티를 가질 수 있다. target 레벨의 options는 해당 타겟 레벨에서만 덮어써진다.</p>

<p><code>options</code> 프로퍼티는 필수요소가 아니며, 필요없는 경우 무시된다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// task 수준의 옵션 객체. task 기본값을 덥어쓴다. </span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// &quot;foo&quot; target 수준의 옵션 객체. task 수준의 options을 덥어쓴다. </span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">bar</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// 명시된 options가 없다. 이 target은 task 수준의 options을 사용한다.</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Files</h2>

<p>대부분의 task는 파일을 대상으로하는 작업들이므로, Grunt는 task가 작업 대상 파일을 선언하기 위한 추상화된 기능을 강력하게 지원한다. <strong>src-dest</strong>(출처와 목적지)간의 파일 매핑을 정의하는 방법은 여러 가지가 있다. 매핑의 표현과 제어도 지속적으로 변경 가능하면서 말이다.
이제부터 설명할 유형들은 모든 task에서 사용할 수 있으므로, 여러분 상황에 맞는 포맷을 선택하면 된다.</p>

<p><code>src</code>와 <code>dest</code>는 모두 파일 포맷에서 지원하지만 &ldquo;Compact&#8221;와 &#8220;Files Array&rdquo; 포맷에서는 몇 가지 추가 프로퍼티를 사용할 수 있다.</p>

<ul>
<li><code>fileter</code>: 필터용도로 유효한 <a href="http://nodejs.org/docs/latest/api/fs.html#fs_class_fs_stats">fs.Stats 메서드명</a>이나 함수를 적용한다. 이때, 함수는 적절한 <code>src</code> 파일경로를 받으면 <code>true</code>나 <code>false</code>를 반환해야 한다.</li>
<li><code>nonull</code>: <code>true</code>를 지정했을 때는 패턴과 일치하는 내용이 없는 경우, 그 패턴 자체를 담은 목록을 반환하고, <code>false</code>를 지정했을 때는 패턴과 일치하는 내용이 없는 경우, 빈 목록을 반환한다. <code>--verbos</code>와 함께 사용하면 파일 경로 관련 버그를 찾을 때 유용하다.</li>
<li><code>dot</code>: <code>true</code>면 패턴에 명시적으로 포함시키지 않아도 구두점(.)으로 시작하는 파일명을 일치시킨다.(src/*.js 하면 hidden files도 포함된다는 말.)</li>
<li><code>matchBase</code>: <code>true</code>면, 슬래시(/)를 포함하지 않은 패턴들이 슬래시를 가지고 있을 경로 기본명을 제외하고 매치된다. 예를 들어 <code>a?b</code> 패턴이 <code>/xyz/acb/123</code>이 아니라 <code>/xyz/123/acb</code>와 일치한다.</li>
<li><code>expand</code>은 동적인 src-dest 파일 매핑을 수행한다. 더 자세한 정보는 <a href="http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically">Building the files object dynamically</a>를 참고한다.</li>
<li>이 이외의 프로퍼티들은 매칭 옵션으로 하위 libs로 전달된다. 추가 옵션은 <a href="https://github.com/isaacs/node-glob">node-glob</a>와 <a href="https://github.com/isaacs/minimatch">minimatch</a>를 보자.</li>
</ul>


<h3>Compact Format</h3>

<p>이 형태는 target 별로 단일 <strong>src-dest</strong> 파일 매핑을 할 때 사용한다. 주로 <a href="https://github.com/gruntjs/grunt-contrib-jshint">grunt-contrib-jshint</a>처럼 <code>dest</code>와 관계없이 <code>src</code> 프로퍼티 하나만 필요한 읽기 전용 task를 위해서 사용한다. src-dest 파일 매핑 별로 프로퍼티 확장도 가능하다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">jshint</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/aa.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/aaa.js&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">bar</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/bb.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/bbb.js&#39;</span><span class="p">],</span>
</span><span class='line'>      <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;dest/b.js&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Files Object Format</h3>

<p>이 형태는 target 별로 다중 src-dest 매핑을 할 때 사용한다. 프로퍼티 명이 목적지(destination) 파일명이고 프로퍼티 값은 출처(source) 파일이 된다. 이 방법을 사용하면 src-dest 파일 매핑이 아무리 많아도 지정할 수 있다. 하지만 매핑 별로 추가 파라미터 지정은 불가능하다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s1">&#39;dest/a.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/aa.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/aaa.js&#39;</span><span class="p">],</span>
</span><span class='line'>        <span class="s1">&#39;dest/a1.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/aa1.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/aaa1.js&#39;</span><span class="p">],</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">bar</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s1">&#39;dest/b.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/bb.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/bbb.js&#39;</span><span class="p">],</span>
</span><span class='line'>        <span class="s1">&#39;dest/b1.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/bb1.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/bbb1.js&#39;</span><span class="p">],</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Files Array Format</h3>

<p>이 형태는 target 별로 다중 src-dest 매핑을 지원하면서 매핑 별로 추가 프로퍼티를 사용할 수 있다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/aa.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/aaa.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;dest/a.js&#39;</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/aa1.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/aaa1.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;dest/a1.js&#39;</span><span class="p">},</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">bar</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/bb.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/bbb.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;dest/b/&#39;</span><span class="p">,</span> <span class="nx">nonull</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/bb1.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/bbb1.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;dest/b1/&#39;</span><span class="p">,</span> <span class="nx">filter</span><span class="o">:</span> <span class="s1">&#39;isFile&#39;</span><span class="p">},</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Older Formats</h3>

<p><strong>dest as targets</strong> 파일 형태는 멀티 task와 target가 있기 전부터 있던 형태로 목적지(destination) 파일 경로가 그대로 target 명이 된다. 하지만 이 때문에 <code>grunt task:target</code>의 형태로 동작시키기가 거북할 수 있다. 또한 src-dest 매핑 별로 target 수준의 옵션이나 추가 프로퍼티를 지정할 수 없다.</p>

<p>이 형태는 되도록 사용하지 말고 가능하면 피하자.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;dest/a.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/aa.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/aaa.js&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="s1">&#39;dest/b.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/bb.js&#39;</span><span class="p">,</span> <span class="s1">&#39;src/bbb.js&#39;</span><span class="p">],</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Custom Filter Function</h3>

<p><code>filter</code> 프로퍼티를 사용하면 파일을 좀 더 꼼꼼하게 지정할 수 있다. 그냥 적절한 <a href="http://nodejs.org/docs/latest/api/fs.html#fs_class_fs_stats">fs.Stats 메서드명</a>을 사용하자. 다음 예제는 패턴과 일치하는 파일만 제거(clean)한다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">clean</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;tmp/**/*&#39;</span><span class="p">],</span>
</span><span class='line'>      <span class="nx">filter</span><span class="o">:</span> <span class="s1">&#39;isFile&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>아니면 파일 일치 여부에 따라 <code>true</code>, <code>false</code>를 반환하는 <code>filter</code>용 함수를 생성하자. 다음 예제는 빈 폴더만 지우는 필터다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">clean</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;tmp/**/*&#39;</span><span class="p">],</span>
</span><span class='line'>      <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filepath</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">isDir</span><span class="p">(</span><span class="nx">filepath</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">).</span><span class="nx">readdirSync</span><span class="p">(</span><span class="nx">filepath</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Globbing patterns</h3>

<p>대상(source) 파일 경로를 모두 개별적으로 지정하는 일이 불가능할 때도 있다. 그래서 Grunt는 <a href="https://github.com/isaacs/node-glob">node-glob</a>와 <a href="https://github.com/isaacs/minimatch">minimatch</a>라이브러리를 내부에 포함시켰고, 이를 통해서 파일명 확장을 지원한다. (globbing이라고도 한다.)</p>

<p>이 문서는 globbing 패턴 전반을 다루는 튜토리얼이 아니므로, 파일경로에서 사용할 수 있는 몇 가지만 소개한다.</p>

<ul>
<li><code>*</code>는 개수와 관계없이 <code>/</code>를 제외한 모든 캐릭터와 일치한다.</li>
<li><code>?</code>는 <code>/</code>를 제외한 하나의 캐릭터와 일치한다.</li>
<li><code>**</code>는 개수와 관계없이 <code>/</code>를 포함한 모든 캐릭터와 일치한다. 하지만 경로부분(폴더명)에서만 동작한다.</li>
<li><code>{}</code>에 콤마로 구분된 목록을 넣으면 &ldquo;or&rdquo; 표현식으로 동작한다.</li>
<li><code>!</code>를 패턴의 처음에 사용하면 불일치(negative match)를 의미한다.</li>
</ul>


<p>globbing 패턴을 잘 모르더라도 <code>foo/*.js</code>는 <code>foo/</code> 폴더에서 <code>.js</code>로 끝나는 모든 파일과 일치하지만, <code>foo/**/*.js</code>는 <code>foo/</code> 폴더와 그 아래의 모든 하위 폴더에서 <code>.js</code>로 끝나는 모든 파일과 일치한다는 것 정도는 알아두면 좋다.</p>

<p>globbing 패턴의 복잡함을 줄이기 위해서, Grunt에서는 파일 경로나 globbing 패턴을 배열로 지정할 수 있다. 패턴은 모두 배열의 색인 순서대로 처리되는데, 결과 집합에서 일치하는 파일을 제외하는 <code>!</code> 접두사 패턴도 마찬가지다. 최종 결과 집합은 중복값이 없는 유일값들이다.</p>

<p>예제을 보자.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// 단일 파일 지정. </span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;foo/this.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'><span class="c1">// 배열로 여러 파일 지정.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/this.js&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/that.js&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/the-other.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'><span class="c1">// glob 패턴 사용.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;foo/th*.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 단일 node-glob 패턴.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;foo/{a,b}*.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'><span class="c1">// 물론 이렇게도 사용 가능.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/a*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/b*.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// foo/ 안의 모든 .js 파일. 순서는 알파벳 순.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/*.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'><span class="c1">// bar.js을 먼저 선택하고, 남은 파일을 알파벳 순으로 추가.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/bar.js&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/*.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// bar.js를 제외한 모든 파일. 알파벳 순.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;!foo/bar.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'><span class="c1">// 모든 파일을 알파벳 순서로 넣고, 끝에 bar.js를 추가.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;!foo/bar.js&#39;</span><span class="p">,</span> <span class="s1">&#39;foo/bar.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 파일경로나 glob 패턴에 템플릿(&lt;%%&gt;)을 사용할 수도 있다.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/&lt;%= basename %&gt;.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/&lt;%= basename %&gt;.min.js&#39;</span><span class="p">}</span>
</span><span class='line'><span class="c1">// 환경설정의 다른 task의 target에서 정의한 파일 목록을 참조할 수도 있다.</span>
</span><span class='line'><span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;%= jshint.all.src %&gt;&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="p">...}</span>
</span></code></pre></td></tr></table></div></figure>


<p>더 자세한 glob 패턴 문법은 <a href="https://github.com/isaacs/node-glob">node-glob</a>와 <a href="https://github.com/isaacs/minimatch">minimatch</a> 문서를 참고하자.</p>

<h3>Building the fiels object dynamically</h3>

<p>대량의 파일들을 처리하고자 할 때, 파일 목록을 동적으로 생성하는데 사용가능한 몇 가지 추가 프로퍼티들이 있다. 이 프로퍼티들은 &ldquo;Compact&#8221;와 &#8220;Files Array&rdquo; 매핑 패턴에 지정할 수 있다.</p>

<ul>
<li><code>expand</code>: 다음 옵션들을 활성화하려면 먼저 이 프로퍼티를 <code>true</code>로 설정한다.</li>
<li><code>cwd</code>: 모든 <code>src</code> 패턴을 이 옵션에 정의된 경로를 기준으로 정한다.</li>
<li><code>src</code>: 일치 여부 확인을 위한 패턴 목록. <code>cwd</code>기준 상대경로.</li>
<li><code>dest</code>: 목적지 지정을 위한 경로 접두사.</li>
<li><code>ext</code>: <code>dest</code> 경로에 생성할 파일의 확장자.</li>
<li><code>flatten</code>: <code>dest</code> 경로에 생성할 목록에서 경로부분을 제거하고 파일명만 남긴다.</li>
<li><code>rename</code>: 일치하는 <code>src</code> 파일별로 호출되는 함수. 이 함수는 (확장자 변경과 경로 제거 후) 일치하는 <code>src</code> 패턴과 <code>dest</code>를 인자로 받아서, 새로운 <code>dest</code> 값을 반환해야 한다. 동일 <code>dest</code> 값이 여러 번 반환되면, 사용된 <code>src</code>들이 이름변경을 위한 출처 배열에 추가된다.</li>
</ul>


<p>다음 <code>minify</code> task 예제는 <code>static_mappings</code>와 <code>dynamic_mappings</code> target에서 동일한 src-dest 파일 매핑을 바라보고 있다. task를 실행하면, Grunt는 자동으로 <code>dynamic_mappings</code> 파일 목록을 정적인 4개의 src-dest 파일 매핑으로 바꾼다.</p>

<p>또한, 정적인 매핑과 동적인 매핑은 다양한 방법으로 함께 쓸 수 있다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">minify</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">static_mappings</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// 이 src-dest 파일 매핑은 수동으로 지정했기 때문에, </span>
</span><span class='line'>      <span class="c1">// 파일 추가 삭제와 Grunfile 수정을 매번 해줘야 한다.</span>
</span><span class='line'>      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;lib/a.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/a.min.js&#39;</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;lib/b.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/b.min.js&#39;</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;lib/subdir/c.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/subdir/c.min.js&#39;</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;lib/subdir/d.js&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/subdir/d.min.js&#39;</span><span class="p">},</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">dynamic_mappings</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// &quot;minify&quot; task가 실행되면 Grunt는 &quot;lib/&quot; 아래에서 &quot;**/*.js&quot;를 찾는다. </span>
</span><span class='line'>      <span class="c1">// 그렇게 찾은 src-dest 파일 매핑으로 빌드한다. </span>
</span><span class='line'>      <span class="c1">// 파일이 추가/제거 될 때 마다 Gruntfile을 수정할 필요없다.</span>
</span><span class='line'>      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>          <span class="nx">expand</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>     <span class="c1">// 동적 기술법을 활성화.</span>
</span><span class='line'>          <span class="nx">cwd</span><span class="o">:</span> <span class="s1">&#39;lib/&#39;</span><span class="p">,</span>      <span class="c1">// Src 패턴의 기준 폴더.</span>
</span><span class='line'>          <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;**/*.js&#39;</span><span class="p">],</span> <span class="c1">// 비교에 사용할 패턴 목록.</span>
</span><span class='line'>          <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/&#39;</span><span class="p">,</span>   <span class="c1">// 목적 경로의 접두사(사실상 폴더명)</span>
</span><span class='line'>          <span class="nx">ext</span><span class="o">:</span> <span class="s1">&#39;.min.js&#39;</span><span class="p">,</span>   <span class="c1">// dest의 파일들의 확장자.</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Templates</h2>

<p><code>&lt;%%&gt;</code> 구분자를 사용한 템플릿은 task가 해당 환경설정을 읽어올 때 자동으로 정적인 값으로 기술된다. 그리고 이는 템플릿를 모두 기술될 때 까지 재귀적으로 실행된다.</p>

<p><code>grunt.initConfig()</code>의 환경설정 객체는 프로퍼티 설정시 컨텍스트로 사용되며, <code>grunt</code>와 그 메서드도 그 안에서 사용할 수 있다. 예) <code>&lt;%= grunt.template.today('yyyy-mm-dd') %&gt;</code></p>

<ul>
<li><code>&lt;%= prop.subprop%&gt;</code>는 환경설정 객체에서 <code>prop.subprop</code>을 찾아서 그 값으로 치환된다. 타입은 관계없다. 이같은 템플릿은 문자열 만이 아니라 배열과 다른 객체로 참조할 수도 있다.</li>
<li><code>&lt;% %&gt;</code>는 임의의 인라인 자바스크립트 코드를 실행한다. 그래서 흐름제어나 순회를 위해 사용할 수 있다.</li>
</ul>


<p>여기 <code>concat</code> task가 있다. <code>grunt concat:sample</code>을 실행하면 <code>foo/*.js</code> + <code>bar/*.js</code> + <code>baz/*.js</code>와 일치하는 파일을 합치고 <code>/* abcde */</code> 상단 주석(banner)를 추가해서 <code>build/abcde.js</code>란 이름으로 생성한다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">sample</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">banner</span><span class="o">:</span> <span class="s1">&#39;/* &lt;%= baz %&gt; */\n&#39;</span><span class="p">,</span>   <span class="c1">// &#39;/* abcde */\n&#39;</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&lt;%= qux %&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;baz/*.js&#39;</span><span class="p">],</span>  <span class="c1">// [[&#39;foo/*.js&#39;, &#39;bar/*.js&#39;], &#39;baz/*.js&#39;]</span>
</span><span class='line'>      <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;build/&lt;%= baz %&gt;.js&#39;</span><span class="p">,</span>      <span class="c1">// &#39;build/abcde.js&#39;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="c1">// task 환경설정 템플릿에 사용되는 임의의 프로퍼티들</span>
</span><span class='line'>  <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">bar</span><span class="o">:</span> <span class="s1">&#39;b&lt;%= foo %&gt;d&#39;</span><span class="p">,</span> <span class="c1">// &#39;bcd&#39;</span>
</span><span class='line'>  <span class="nx">baz</span><span class="o">:</span> <span class="s1">&#39;a&lt;%= bar %&gt;e&#39;</span><span class="p">,</span> <span class="c1">// &#39;abcde&#39;</span>
</span><span class='line'>  <span class="nx">qux</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;bar/*.js&#39;</span><span class="p">],</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Importing External Data</h2>

<p>다음 <code>Gruntfile</code> 파일은 <code>package.json</code> 파일에서 프로젝트 관련 메타데이터를 가져온다. 그리고 그 메타데이터를 <a href="http://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify 플러그인</a>의 <code>uglify</code> task의 상단 주석 생성과 src 파일 minify를 위한 정보로 사용한다.</p>

<p>Grunt는 JSON과 YAML 데이터를 가져올 수 있는 <code>grunt.file.readJSON</code>와 <code>grunt.file.readYAML</code>를 지원한다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">pkg</span><span class="o">:</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span><span class="s1">&#39;package.json&#39;</span><span class="p">),</span>
</span><span class='line'>  <span class="nx">uglify</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">banner</span><span class="o">:</span> <span class="s1">&#39;/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today(&quot;yyyy-mm-dd&quot;) %&gt; */\n&#39;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;src/&lt;%= pkg.name %&gt;.js&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;dist/&lt;%= pkg.name %&gt;.min.js&#39;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>



</div>
	<div class="toc"></div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-11-17T00:29:00+09:00" pubdate data-updated="true">Nov 17<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/grunt/'>Grunt</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/translate/'>Translate</a>


</div>
	
	<div class="comments"><a href="#disqus_thread">Comments</a></div>

	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
		<a class="addthis_counter addthis_pill_style"></a>
		
	</div>
	
	<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-52599cc044d135f3"></script>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    zziuni

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'zziunigithubpage';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://zziuni.github.io/blog/2013/11/17/grunt-configuring-tasks-in-korean/';
        var disqus_url = 'http://zziuni.github.io/blog/2013/11/17/grunt-configuring-tasks-in-korean/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-44802186-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


<script>
(function($){
    // $(".toc").toc({
    //     "selectors": "h1, h2",
    //     "container": "#content .entry-content",
    //     "smoothScrolling": true,
    //     "prefix": "toc"
    // });
})(jQuery);
</script>
</body>
</html>